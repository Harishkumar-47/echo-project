<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Recovery App</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="container">
    <h1>File Recovery</h1>

    <form id="scan-form">
      <label for="scan_mode">Scan Mode</label>
      <select id="scan_mode" required>
        <option value="carve">Signature Carving (Raw Scan)</option>
        <option value="deleted">Deleted File Recovery</option>
        <option value="deep">Deep Carve (Photorec/Scalpel)</option>
      </select>

      <label for="device_path">Select Drive</label>
      <select id="device_path" required>
        <option value="">Loading drives...</option>
      </select>

      <label for="file_type">File type</label>
      <input type="text" id="file_type" placeholder="e.g., jpg, pdf, DOCX" />

      <label for="name_filter">Filename contains</label>
      <input type="text" id="name_filter" placeholder="e.g., report, invoice" />

      <label for="min_size">Minimum file size (bytes)</label>
      <input type="number" id="min_size" value="512" />

      <div class="row">
        <div class="column">
          <label for="start_date">Start date</label>
          <input type="date" id="start_date" />
        </div>
        <div class="column">
          <label for="end_date">End date</label>
          <input type="date" id="end_date" />
        </div>
      </div>

      <div id="deep-tool-options" style="display:none;">
        <label for="deep_tool">Deep Carve Tool</label>
        <select id="deep_tool">
          <option value="photorec">Photorec</option>
          <option value="scalpel">Scalpel</option>
        </select>
      </div>

      <button type="submit">Scan</button>
    </form>

    <div id="status"></div>

    <h2>Results</h2>
    <table id="results-table">
      <thead>
        <tr>
          <th>Filename</th>
          <th>Type</th>
          <th>Size</th>
          <th>Recovered at</th>
          <th>Download</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="chat-bar">
      <label for="chatInput">ðŸ’¬ Need help? Chat with us:</label>
      <div class="chat-row">
        <input type="text" id="chatInput" placeholder="Type your message..." />
        <button type="button" onclick="sendChat()">Send</button>
      </div>
      <div id="chatStatus"></div>
    </div>
  </div>

  <script src="/static/script.js"></script>
  <script>
    document.getElementById("scan_mode").addEventListener("change", function () {
      const mode = this.value;
      document.getElementById("deep-tool-options").style.display = mode === "deep" ? "block" : "none";
    });
  </script>
</body>
</html>
